## Handling Inconsistent or Incorrect Values

Inconsistent text or typos often appear as:
- Values that differ by a few digits or characters (e.g., `Chcgo` instead of `Chicago`)
- Entries inconsistent with the rest of the column

These issues can lead to incorrect grouping, aggregation, or analysis ‚Äî so they should be cleaned early in the process.

### Identifying Inconsistent Values

Depending on the **data type**, you can inspect columns as follows:

| Data Type | How to Check | Example |
|------------|---------------|----------|
| **Categorical (Text)** | Check unique values | `df['city'].value_counts()` |
| **Numerical** | Check summary statistics | `df['sales'].describe()` |

---

### Fixing Inconsistent or Incorrect Text

#### 1Ô∏è‚É£ Update Specific Values  

```python
df.loc[df['city'] == 'Chcgo', 'city'] = 'Chicago' # Use `.loc[]` to directly update values based on conditions.
```

#### 2Ô∏è‚É£ Conditional Replacement
```python
# Use np.where() to update values based on a logical condition.

import numpy as np
df['status'] = np.where(df['sales'] > 1000, 'High', 'Low')
```

#### 3Ô∏è‚É£ Value Mapping
```python
# Use .map() to replace multiple incorrect values efficiently.

city_map = {
    'New York': 'New York',
    'Boston': 'Boston',
    'Chcgo': 'Chicago',
    'Sacranto': 'Sacramento'
}
df['city'] = df['city'].map(city_map)
```

#### 4Ô∏è‚É£ String Methods for Text Cleanup
```python
# Use Pandas string methods to standardize and clean text columns.

df['city'] = (
    df['city']
    .str.lower()       # Convert to lowercase
    .str.strip()       # Remove extra spaces
    .str.replace('nyc', 'new york', regex=False)  # Fix abbreviations
)
```
---
## Best Practices
- Always inspect value_counts() before and after cleaning.
- Normalize case (e.g., convert all text to lowercase).
- Remove extra spaces or unwanted symbols.
- Maintain a dictionary (mapping) for consistent replacements.

--- 
##  Common String Methods in Python (and Pandas `.str` Accessor)

Python (and Pandas) provide a wide range of string methods to clean, format, and transform text data.  
In Pandas, you apply them with the `.str` accessor ‚Äî e.g., `df['column'].str.lower()`.

---

###  **Case Conversion**

| Method | Description | Example |
|---------|--------------|----------|
| `str.lower()` | Converts all characters to lowercase | `'Hello'.lower() ‚Üí 'hello'` |
| `str.upper()` | Converts all characters to uppercase | `'Hello'.upper() ‚Üí 'HELLO'` |
| `str.title()` | Capitalizes the first letter of each word | `'hello world'.title() ‚Üí 'Hello World'` |
| `str.capitalize()` | Capitalizes only the first letter of the string | `'hello'.capitalize() ‚Üí 'Hello'` |
| `str.swapcase()` | Swaps uppercase to lowercase and vice versa | `'PyThOn'.swapcase() ‚Üí 'pYtHoN'` |

---

###  **Whitespace & Character Cleanup**

| Method | Description | Example |
|---------|--------------|----------|
| `str.strip()` | Removes whitespace from both ends | `' hello '.strip() ‚Üí 'hello'` |
| `str.lstrip()` | Removes whitespace from the left side | `' hello'.lstrip() ‚Üí 'hello'` |
| `str.rstrip()` | Removes whitespace from the right side | `'hello '.rstrip() ‚Üí 'hello'` |
| `str.replace(old, new)` | Replaces substrings | `'NYC'.replace('NYC', 'New York') ‚Üí 'New York'` |
| `str.removeprefix('sub')` | Removes a prefix if present | `'abc123'.removeprefix('abc') ‚Üí '123'` |
| `str.removesuffix('sub')` | Removes a suffix if present | `'file.csv'.removesuffix('.csv') ‚Üí 'file'` |

---

###  **Searching & Matching**

| Method | Description | Example |
|---------|--------------|----------|
| `str.contains('text')` | Checks if a substring exists (Pandas `.str.contains()`) | `'data'.__contains__('a') ‚Üí True` |
| `str.startswith('prefix')` | Checks if string starts with a given prefix | `'python'.startswith('py') ‚Üí True` |
| `str.endswith('suffix')` | Checks if string ends with a given suffix | `'data.csv'.endswith('.csv') ‚Üí True` |
| `str.find('sub')` | Returns the index of first occurrence (or `-1`) | `'hello'.find('e') ‚Üí 1` |
| `str.count('sub')` | Counts occurrences of a substring | `'banana'.count('a') ‚Üí 3` |

---

###  **Splitting & Joining**

| Method | Description | Example |
|---------|--------------|----------|
| `str.split(' ')` | Splits string into a list | `'a,b,c'.split(',') ‚Üí ['a', 'b', 'c']` |
| `str.rsplit(' ', n)` | Splits from the right side | `'a b c d'.rsplit(' ', 1) ‚Üí ['a b c', 'd']` |
| `str.join(list)` | Joins list elements into a string | `'-'.join(['a', 'b', 'c']) ‚Üí 'a-b-c'` |

---

###  **Validation Methods (Check the Type of String)**

| Method | Description | Example |
|---------|--------------|----------|
| `str.isalpha()` | True if all chars are alphabetic | `'abc'.isalpha() ‚Üí True` |
| `str.isdigit()` | True if all chars are digits | `'123'.isdigit() ‚Üí True` |
| `str.isalnum()` | True if all chars are alphanumeric | `'abc123'.isalnum() ‚Üí True` |
| `str.islower()` | True if all chars are lowercase | `'abc'.islower() ‚Üí True` |
| `str.isupper()` | True if all chars are uppercase | `'ABC'.isupper() ‚Üí True` |
| `str.isspace()` | True if string contains only spaces | `'   '.isspace() ‚Üí True` |

---

###  **Useful Pandas `.str` Methods**

| Method | Description |
|---------|--------------|
| `df['col'].str.len()` | Get string length for each element |
| `df['col'].str.contains('pattern', case=False)` | Filter rows containing text |
| `df['col'].str.extract('regex')` | Extract patterns using regex |
| `df['col'].str.replace('old', 'new', regex=True)` | Replace using regex |
| `df['col'].str.cat(sep=', ')` | Concatenate text values |
| `df['col'].str.get(i)` | Get character at position `i` |

---

>  **Tip:** Combine multiple string methods for powerful cleaning pipelines:
> ```python
> df['city'] = (df['city']
>     .str.lower()
>     .str.strip()
>     .str.replace('nyc', 'new york', regex=False)
> )
> ```

---

## üßæ Data Cleaning ‚Äî Quick Reference Guide

This quick reference provides the most common **Pandas methods** for detecting and handling missing data, fixing incorrect data types, and cleaning text or inconsistent values.

---

### üß≠ 1. Detecting & Summarizing Missing Data

| Task | Command | Description |
|------|----------|-------------|
| Check missing values (boolean) | `df.isna()` | Returns `True` for missing entries |
| Count missing values per column | `df.isna().sum()` | Summarizes total NaNs by column |
| View dataset info | `df.info()` | Shows data types, non-null counts |
| Count all values (incl. NaN) | `df['col'].value_counts(dropna=False)` | Detects missing or rare values |
| Select rows with missing data | `df[df.isna().any(axis=1)]` | Filters only incomplete rows |

---

### üßπ 2. Handling Missing Data

| Task | Command | Description |
|------|----------|-------------|
| Drop rows with missing values | `df.dropna()` | Removes rows with any NaN |
| Drop only if all values are NaN | `df.dropna(how='all')` | Keeps partially filled rows |
| Drop rows missing specific column | `df.dropna(subset=['City'])` | Removes rows missing ‚ÄúCity‚Äù |
| Keep rows without missing values | `df[df['City'].notna()]` | Filters complete data only |
| Fill missing values (impute) | `df['Grade'].fillna(df['Grade'].mean(), inplace=True)` | Replaces NaN with mean (or 0, median, etc.) |

---

### üß† 3. Converting Data Types

| Task | Command | Description |
|------|----------|-------------|
| View data types | `df.dtypes` | Displays data type of each column |
| Convert to numeric | `pd.to_numeric(df['col'], errors='coerce')` | Converts to numeric, sets invalids to NaN |
| Convert to datetime | `pd.to_datetime(df['col'], format='%Y-%m-%d')` | Converts string dates to datetime |
| Convert data type explicitly | `df['col'].astype('float')` | Changes column to specific type |

---

### üî° 4. Cleaning & Standardizing Text

| Task | Command | Description |
|------|----------|-------------|
| Convert to lowercase | `df['col'].str.lower()` | Standardizes text case |
| Remove extra spaces | `df['col'].str.strip()` | Cleans leading/trailing spaces |
| Replace substrings | `df['col'].str.replace('old', 'new', regex=False)` | Replaces incorrect values |
| Find inconsistent text | `df['col'].value_counts()` | Lists unique variations |
| Replace multiple values | `df['col'] = df['col'].map(mapping_dict)` | Maps incorrect to correct values |
| Conditional updates | `df['col'] = np.where(df['col'] == 'x', 'y', df['col'])` | Fix based on condition |

---

### üß© 5. String & Pattern Utilities (Pandas `.str`)

| Task | Command | Description |
|------|----------|-------------|
| Get string length | `df['col'].str.len()` | Returns length of each string |
| Extract pattern | `df['col'].str.extract(r'(\d+)')` | Extracts digits (regex) |
| Check pattern presence | `df['col'].str.contains('pattern', case=False)` | Boolean mask for matching |
| Split into multiple columns | `df['col'].str.split('-', expand=True)` | Breaks strings by delimiter |
| Concatenate values | `df['col'].str.cat(sep=', ')` | Joins multiple string values |

---

### Common Fixing Examples

```python
df.loc[df['City'] == 'Chcgo', 'City'] = 'Chicago'  # Update single incorrect value

city_map = {'Chcgo': 'Chicago', 'Sacranto': 'Sacramento'} # Replace multiple values with mapping
df['City'] = df['City'].map(city_map)

df['Price'] = df['Price'].str.replace('$', '').astype(float)  # Replace symbols before numeric conversion
```

#### Tip: Always inspect data before and after cleaning with: 
```python
df.head()     # Check first few rows
df.info()     # Confirm data types and missing counts
df.describe() # Verify numerical consistency
```












